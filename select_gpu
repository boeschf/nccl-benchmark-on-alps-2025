#!/bin/bash

# Set CUDA_VISIBLE_DEVICES based on SLURM_LOCALID
export CUDA_VISIBLE_DEVICES=$SLURM_LOCALID

## Define the mapping of SLURM_LOCALID to network interfaces
#declare -a HSN_MAPPING=("hsn0" "hsn2" "hsn3" "hsn1")
#
## Use the mapping for NCCL_SOCKET_IFNAME
#export NCCL_SOCKET_IFNAME="=${HSN_MAPPING[$SLURM_LOCALID]}"

export NCCL_SOCKET_IFNAME="hsn"

exec "$@"
